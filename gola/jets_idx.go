// Code generated by gola 0.0.6; DO NOT EDIT.

package jets

import (
	"fmt"
	"strings"

	"github.com/olachat/gola/coredb"
)

type orderBy int

type idxQuery[T any] struct {
	whereSql    string
	limitSql    string
	orders      []string
	whereParams []any
}

// order by enum & interface
const (
	IdAsc orderBy = iota
	IdDesc
	PilotIdAsc
	PilotIdDesc
	AirportIdAsc
	AirportIdDesc
	NameAsc
	NameDesc
	ColorAsc
	ColorDesc
	UuidAsc
	UuidDesc
	IdentifierAsc
	IdentifierDesc
	CargoAsc
	CargoDesc
	ManifestAsc
	ManifestDesc
)

func (q *idxQuery[T]) OrderBy(args ...orderBy) coredb.ReadQuery[T] {
	q.orders = make([]string, len(args))
	for i, arg := range args {
		switch arg {
		case IdAsc:
			q.orders[i] = "`id` asc"
		case IdDesc:
			q.orders[i] = "`id` desc"
		case PilotIdAsc:
			q.orders[i] = "`pilot_id` asc"
		case PilotIdDesc:
			q.orders[i] = "`pilot_id` desc"
		case AirportIdAsc:
			q.orders[i] = "`airport_id` asc"
		case AirportIdDesc:
			q.orders[i] = "`airport_id` desc"
		case NameAsc:
			q.orders[i] = "`name` asc"
		case NameDesc:
			q.orders[i] = "`name` desc"
		case ColorAsc:
			q.orders[i] = "`color` asc"
		case ColorDesc:
			q.orders[i] = "`color` desc"
		case UuidAsc:
			q.orders[i] = "`uuid` asc"
		case UuidDesc:
			q.orders[i] = "`uuid` desc"
		case IdentifierAsc:
			q.orders[i] = "`identifier` asc"
		case IdentifierDesc:
			q.orders[i] = "`identifier` desc"
		case CargoAsc:
			q.orders[i] = "`cargo` asc"
		case CargoDesc:
			q.orders[i] = "`cargo` desc"
		case ManifestAsc:
			q.orders[i] = "`manifest` asc"
		case ManifestDesc:
			q.orders[i] = "`manifest` desc"
		}
	}
	return q
}

func (q *idxQuery[T]) All() []*T {
	result, _ := coredb.Find[T](DBName, TableName, q)
	return result
}

func (q *idxQuery[T]) Limit(offset, limit int) []*T {
	q.limitSql = fmt.Sprintf(" limit %d, %d", offset, limit)
	result, _ := coredb.Find[T](DBName, TableName, q)
	return result
}

type order[T any] interface {
	OrderBy(args ...orderBy) coredb.ReadQuery[T]
}

type orderReadQuery[T any] interface {
	order[T]
	coredb.ReadQuery[T]
}

type iQuery[T any] interface {
	orderReadQuery[T]
}

// Find methods

// Select returns rows from `jets` table with index awared query
func Select() iQuery[Jet] {
	return new(idxQuery[Jet])
}

// SelectFields returns rows with selected fields from `jets` table with index awared query
func SelectFields[T any]() iQuery[T] {
	return new(idxQuery[T])
}

func (q *idxQuery[T]) GetWhere() (whereSql string, params []any) {
	var orderSql string
	if len(q.orders) > 0 {
		orderSql = " order by " + strings.Join(q.orders, ",")
	}
	return q.whereSql + orderSql + q.limitSql, q.whereParams
}
